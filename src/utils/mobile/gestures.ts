/**Gesture Recognition*/ export type GestureType = 'swipe' | 'pinch' | 'tap' | 'hold' | 'rotate'; export class GestureRecognizer { private lastTouches: Array<{ x: number; y: number }> = []; private gestureCallbacks: Map<GestureType, Function> = new Map(); recognizeGesture(touches: Array<{ x: number; y: number }>): GestureType | null { if (touches.length === 1 && this.lastTouches.length === 1) { return this.isSwipe(touches[0], this.lastTouches[0]) ? 'swipe' : null; } if (touches.length === 2 && this.lastTouches.length === 2) { return this.isPinch(touches, this.lastTouches) ? 'pinch' : null; } this.lastTouches = touches; return null; } private isSwipe(current: { x: number; y: number }, previous: { x: number; y: number }): boolean { const distance = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2)); return distance > 50; } private isPinch(current: Array<{ x: number; y: number }>, previous: Array<{ x: number; y: number }>): boolean { const currentDist = Math.hypot(current[0].x - current[1].x, current[0].y - current[1].y); const previousDist = Math.hypot(previous[0].x - previous[1].x, previous[0].y - previous[1].y); return Math.abs(currentDist - previousDist) > 10; } onGesture(gesture: GestureType, callback: Function): void { this.gestureCallbacks.set(gesture, callback); } }
