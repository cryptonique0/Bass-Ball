/**Frame Rate Control - Adaptive FPS adjustment*/ export class FrameRateController { private targetFPS: number = 60; private currentFPS: number = 60; private averageFPS: number = 60; private adjustmentFactor: number = 0.95; adjustFrameRate(currentMetrics: number): void { this.currentFPS = currentMetrics; const isLow = currentMetrics < this.targetFPS * 0.8; if (isLow && this.targetFPS > 30) { this.targetFPS = Math.max(30, Math.floor(this.targetFPS * this.adjustmentFactor)); } else if (currentMetrics > this.targetFPS * 0.95 && this.targetFPS < 120) { this.targetFPS = Math.min(120, Math.floor(this.targetFPS / this.adjustmentFactor)); } this.averageFPS = (this.averageFPS * 0.9 + currentMetrics * 0.1); } getTargetFPS(): number { return this.targetFPS; } getAverageFPS(): number { return this.averageFPS; } setTargetFPS(fps: number): void { this.targetFPS = Math.max(30, Math.min(120, fps)); } }
